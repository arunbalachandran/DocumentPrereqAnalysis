<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Prerequisite Analyzer</title>
    <meta name="generator" content="Google Web Designer 1.7.3.0307">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.16.1/vis.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/shepherd/1.7.0/css/shepherd-theme-arrows.css" type="text/css" />
    <link rel="stylesheet" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Indie+Flower" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/triplewindow.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bar.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/buttongroup.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/shepherd-custom.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/commafield.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/welcome.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/modals.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/progress.css') }}">

    <script>  // use this in the below binding script
      var graphNodes = {{ nodes|tojson }};
      function LoadGoogle()
      {
          if (typeof google != 'undefined' && google && google.load && "temp" != document.getElementById("container").getAttribute("name")) {
              console.log('Finished loading google api!');
              var clickedNode = document.getElementById('container').getAttribute('name');
              var element = google.search.cse.element.getElement('search-box');
              element.prefillQuery(clickedNode);
              console.log("Filled element with value", clickedNode);
              $('.gsc-search-button').click();
              $.ajax({
                type : "POST",
                url : "{{url_for('node_clicked')}}",
                data : JSON.stringify({'clickdata': clickedNode}),
                contentType: 'application/json;charset=UTF-8',
                success: function(data) {
                    console.log("Success case!");
                    var parsedData = JSON.parse(data);
                    console.log("No problems here");
                    $("#scholardiv").html(parsedData['data']);
                },
                error: function (data) {
                    console.log("failure case!");
                }
              });
          }
          else {  // Retry later...
              setTimeout(LoadGoogle, 500);
          }
      }
    </script>
    <script type="text/javascript" src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  </head>
  <body class="htmlNoPages">
    <div class="container-fluid">
      <div class="gwd-div-ipui"></div>
      <div class="gwd-div-48j0 gwd-gen-rk59gwdanimation temp" id="container">
        <!-- <div id="container" name="temp" class="test"></div> -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.16.1/vis-network.min.js"> </script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.12/clipboard.min.js"> </script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.3/js/tether.min.js"> </script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/shepherd/1.7.0/js/shepherd.min.js"> </script>
        <script type="text/javascript" src="{{ url_for('static', filename='js/api.js') }}"> </script>
        <script type="text/javascript" src="{{ url_for('static', filename='js/helpers.js') }}"> </script>
        <script type="text/javascript" src="{{ url_for('static', filename='js/main_functions.js') }}"> </script>
        <script type="text/javascript" src="{{ url_for('static', filename='js/help.js') }}"> </script>
        <script type="text/javascript" src="{{ url_for('static', filename='js/main.js') }}"> </script>
        <script type="text/javascript" src="{{ url_for('static', filename='js/network_serialize.js') }}"> </script>
        <script type="text/javascript" src="{{ url_for('static', filename='js/bindings.js') }}"> </script>
        <!-- <script type="text/javascript" src="{{ url_for('static', filename='js/commafield.js') }}"> </script> -->
        <script type="text/javascript" src="{{ url_for('static', filename='js/modals.js') }}"> </script>
        <script type="text/javascript" src="{{ url_for('static', filename='js/progress.js') }}"> </script>
        <script>
          // Run events that need to happen on initialization.
          window.onload = function () {
              bind();
          };
        </script>
      </div>
      <div class="gwd-div-zptc">
        <script>
          (function() {
            var cx = '';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            console.log("insertion complete");
            s.parentNode.insertBefore(gcse, s);
          })();
        </script>
        <gcse:search gname="search-box"></gcse:search>
      </div>
      <div id="scholardiv" class="gwd-div-sqmu gwd-gen-9lgjgwdanimation" style="background-color: white"></div>
      <div class="gwd-div-14zh">
        This section is for Amazon Book API.
      </div>
      <h2 class="gwd-p-jvrs">Document Classifier With Prerequisite Analysis</h2>
    </div>
  </body>
  <script>
      $(document).ready(function() {
          //Make the change here to get the clicked node. AJAX call would be the same.
          console.log("The document is ready!");
          $('.gsc-search-box').hide();
          LoadGoogle();
      });
  </script>
</html>
